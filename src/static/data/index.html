<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <title>Sybeol Home monitoring</title>
    <meta name="description" content="Power metering for smart homes" />
    <meta name="keywords" content="energy, power, metering, home, ecology, savings" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <!-- stylesheets -->
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen" />

    <!-- jQuery - the core -->
    <script src="/js/jquery-1.6.2.min.js" type="text/javascript"></script>

    <!-- charts API -->
    <script src="/js/highcharts.js" type="text/javascript"></script>
    <script src="/js/chart.js" type="text/javascript"></script>

    <script src="/js/login.js" type="text/javascript"></script>

    <script type="text/javascript">

        var chartData;

        var showNoData = function() {
            $("#chartContainer").html('You don\'t have any data yet<br/> Do you want to <a href="/devices/">add a new device</a> ?');
        }

        $(document).ready(function() {

            var showGraph = function() {
                if(chartData) {
                    $('#chartContainer').show();
                } else {
                    $.get("/measure", function(data) {
                        if(data && data.length > 0) {

                            var serie = new Object();
                            serie.name = "Global";
                            serie.data = new Array();
                            for(var i = 0 ; i < data.length ; i++) {
                                serie.data[i] = new Array();
                                serie.data[i][0] = Date.parse(data[i].time);
                                serie.data[i][1] = data[i].value;
                            }

                            chartData = serie;
                            initChart('chartContainer', chartData);
                        } else {
                            showNoData();
                        }
                    });
                }
            }

            var hideGraph = function() {
                $('#chartContainer').hide();
            }
            
            autoRedirectToLogin();
            $('#header').load('/elements/menu.html');
            $('#footer').load('/elements/footer.html');

            return false; // do not proceed with form
        });

    </script>
</head>

<body>
<div id="header" class="header">

</div>
<div class="headerContentLeft">
    <a href="/">
        <img width="50px" class="inline" src="/css/images/logo_Sybeol_small.png" alt="Logo Sybeol"/>
        <h1 class="inline">Sybeol</h1>
    </a>
</div>
<div class="content">
    <div class="leftMenu">
        <button class="menuButton menuButtonSelected">Power</button>
        <button class="menuButton">Temperature</button>
        <button class="menuButton">Pressure</button>
    </div>

    <div id="chartContainer" class="chartContainer" style="margin: auto; width: 800px; "></div>
</div>

<div id="footer"></div>
</body>
</html>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-26203167-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
